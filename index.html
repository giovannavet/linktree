<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- T√çTULO ATUALIZADO: Apenas o nome completo para compartilhamento -->
    <title>Giovanna Castelo Branco</title>
    
    <!-- --- OPEN GRAPH METADATA (PARA COMPARTILHAMENTO) --- -->
    <meta property="og:title" content="Giovanna Castelo Branco | Veterin√°ria Integrativa">
    <meta property="og:description" content="Acupuntura e Terapias Integrativas para o bem-estar e qualidade de vida do seu pet. Atendimento Domiciliar em Natal/RN.">
    <!-- Imagem de Compartilhamento (og:image) - Fallback para SVG -->
    <meta property="og:image" content="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNTAgMjUwIiB3aWR0aD0iMjUwIiBoZWlnaHQ9IjI1MCI+PHJlY3Qgd2lkdGg9IjI1MCIgaGVpZ2h0PSIyNTAiIGZpbGw9IiNmZmZmZmYiLz48ZyBmaWxsPSJub25lIiBzdHJva2U9IiM4YWE4OGUiIHN0cm9rZS13aWR0aD0iMTQiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHxpbmUgeDE9IjEyNSIgeTE9IjIzMCIgeDI9IjEyNSIgeTI9IjYwIi8+PHBhdGggZD0iTTE3MCAxNTBj‡ßá‡¶®‡ßç‡¶∏‡¶øIDQwLTkwIDQwLTEyMiAwIi8+PHBhdGggZD0iTTEyNSAxNjhMMTAwIDE0MEExOCAxOCAwIDEgMCAxMjUgMTIzTDE1MCAxNDBMMTI1IDE2OCIvPjxwYXRoIGQ9Ik0yMDAgOTRsLTIwIDVjLTE1IDctMzUgMi00Ny0xMGwtNC02Ii8+PHBhdGggZD0iTDUwIDk0bDIwIDVjMTUgNyAzNSAyIDQ3LTEwbDQtNiIvPjxwYXRoIGQ9Ik0xNDAgNzJjMC0yMi0zMC0yMi0zMC0wYy01IDgtMTAgMjAtMTAgMzBhNzUgNzUgMCAwIDAgNTAtMTUgQzE1MCA5MiAxNDUgODAgMTQwIDcyeiIgZmlsbD0iI2Q0YTM3MyIgc3Ryb2tlPSJub25lIi8+PC9nPjxwYXRoIGQ9Ik0xMjUgNTVDMTI1IDUxIDEyNSAzNiAxMTQgMjJNNTggODZMODAgNzJNNTAgMjJMMjAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iIzg2OTY4YSIgc3Ryb2tlLXdpZHRoPSI3IiBzdHJva2UtbGluZWNhcD0icm91bmQiLz48cGF0aCBkPSJNMTI1IDU1QzEyNSA1MSAxMjUgMzYgMTM2IDIyTTE5MiA4NkwxNzAgNzJNMTEwIDIyTDE0MCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjODY5NjhhIiBzdHJva2Utd2lkdGg9IjciIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPjwvc3ZnPg==">
    <meta property="og:type" content="website">
    <meta property="og:locale" content="pt_BR">
    <!-- --- FIM OPEN GRAPH METADATA --- -->
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel para JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome para √≠cones -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts: Lato e Playfair Display -->
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Playfair+Display:wght@400;600;700&display=swap" rel="stylesheet">

    <!-- Firebase SDK Imports -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, onSnapshot, collection, query, where, addDoc, serverTimestamp, getDoc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // Define as vari√°veis globais para o React usar
        window.firebase = {
            initializeApp, getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged,
            getFirestore, doc, setDoc, onSnapshot, collection, query, where, addDoc, serverTimestamp, getDoc, updateDoc, deleteDoc,
            setLogLevel
        };
    </script>

    <script>
        // Configura√ß√£o do Tailwind
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        pastel: {
                            bg: '#fbf7f4', 
                            card: '#ffffff',
                            primary: '#8ba88e', // Verde s√°lvia suave
                            secondary: '#e8d5cc', // Bege rosado
                            text: '#5a5a5a',
                            accent: '#d4a373' // Marrom claro/terroso para destaque
                        }
                    },
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        serif: ['Playfair Display', 'serif'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Estilos globais e anima√ß√µes */
        html, body {
            height: auto; 
            min-height: 10vh;
            overflow-y: scroll;
            -webkit-overflow-scrolling: touch; 
        }

        body {
            background-color: #fbf7f4;
            color: #5a5a5a;
            background-image: radial-gradient(#e8d5cc 0.5px, transparent 0.5px);
            background-size: 50px 50px;
        }
        .link-btn:hover {
            box-shadow: 0 4px 12px rgba(139, 168, 142, 0.5); 
        }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes scaleIn { from { transform: scale(0.95); } to { transform: scale(1); } }
        .modal-overlay { animation: fadeIn 0.2s ease-out; }
        .modal-content { animation: scaleIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .custom-scroll::-webkit-scrollbar { width: 6px; }
        .custom-scroll::-webkit-scrollbar-track { background: #f1f1f1; }
        .custom-scroll::-webkit-scrollbar-thumb { background: #d4a373; border-radius: 4px; }
        
        /* Estilo para formul√°rio de edi√ß√£o */
        .edit-form-card {
            background-color: #fefcf3; /* Quase branco/bege muito claro */
            border: 1px solid #d4a373; /* Borda da cor de destaque */
        }
        
        /* Estilo para o bot√£o de Admin super discreto no rodap√© */
        .admin-footer-btn {
            color: #8ba88e; /* Cor prim√°ria do tema */
            background-color: #fbf7f4; /* Cor de fundo */
        }
        .admin-footer-btn:hover {
            color: #d4a373; /* Cor de destaque ao passar o mouse */
        }
    </style>
</head>
<body class="min-h-screen">
    <div id="root"></div>

    <script type="text/babel">
        // --- DADOS E VARI√ÅVEIS DE CONFIGURA√á√ÉO ---
        const HARDCODED_PASSWORD = "Gigi@34712705";
        
        const siteData = {
            "profile": {
                "name": "Giovanna Castelo Branco", 
                "title_extra": "M√©dica Veterin√°ria", 
                "crmv": "CRMV/RN 2551",
                "image": "https://placehold.co/150x150/8ba88e/FFFFFF?text=Dra.+GCB", // Imagem de fallback
                "tagline_main": "Acupuntura | Fotobiomodula√ß√£o | Eletroestimula√ß√£o", 
                "tagline_sub": "Transformo vidas com recupera√ß√£o, sa√∫de e equil√≠brio",
            },
            "highlight_box": {
                "title": "Atendimento Domiciliar",
                "content": "Conforto e seguran√ßa para seu pet em Natal, RN. Especializada em Acupuntura Veterin√°ria para equil√≠brio e bem-estar."
            },
            "whatsapp_message": "Ol√°, Sou tutor e gostaria de saber mais sobre:", 
            "social": {
                "whatsapp": "84988267313",
                "email": "castelobrancovet@gmail.com", 
                "instagram": "https://www.instagram.com/giovannavet?igsh=N2lwdDNhbjJ2NHEy"
            },
            "buttons": [
                {
                    "id": "agendamento_link",
                    "type": "link_highlight",
                    "label": "Agende uma Consulta",
                    "icon": "fab fa-whatsapp",
                },
                {
                    "id": 1,
                    "title": "Meu Trabalho: conforto, equil√≠brio e qualidade de vida",
                    "icon": "fas fa-leaf",
                    "popup_title": "Meu Trabalho: Abordagem Integrativa Completa",
                    "popup_content": "**Na Primeira Consulta:**\n\nRealizo uma avalia√ß√£o completa (hist√≥rico, exame f√≠sico e an√°lise do estado energ√©tico) do seu pet para entender suas necessidades.\n\n- **Protocolo Personalizado:** Em seguida, iniciamos o protocolo inicial de Medicina Integrativa, podendo incluir diversas t√©cnicas como: acupuntura, fotobiomodula√ß√£o (laserpuntura), eletroestimula√ß√£o e moxabust√£o, a depender de cada caso.\n- **Plano Detalhado:** Ao final, voc√™ receber√° o plano terap√™utico detalhado e a frequ√™ncia sugerida de sess√µes, tudo pensado para o melhor conforto e resposta do seu pet." 
                },
                {
                    "id": 2,
                    "title": "Benef√≠cios da Medicina Integrativa", 
                    "icon": "fas fa-stethoscope",
                    "popup_title": "Benef√≠cios da Medicina Integrativa", 
                    "popup_content": "A Medicina Veterin√°ria Integrativa une o melhor da ci√™ncia moderna √†s terapias complementares, oferecendo uma vis√£o ampla e completa do cuidado animal. Ela valoriza n√£o apenas a doen√ßa, mas o indiv√≠duo como um todo (corpo, mente e esp√≠rito) promovendo equil√≠brio e bem-estar. Diante disso, utilizo a Acupuntura e outras t√©cnicas integrativas para restaurar a vitalidade, reduzir desconfortos e melhorar a qualidade de vida do seu pet.\n\nOs atendimentos s√£o realizados no conforto do lar ou em cl√≠nicas parceiras, com dedica√ß√£o e aten√ß√£o ao melhor para cada fam√≠lia. Estou sempre dispon√≠vel para esclarecer d√∫vidas, orientar tutores e contribuir para que os animais tenham uma vida mais saud√°vel e feliz. ü©∑"
                },
                {
                    "id": 3,
                    "title": "Pacotes Terap√™uticos e Acompanhamento",
                    "icon": "fas fa-spa",
                    "popup_title": "Pacotes Terap√™uticos (Bem-Estar Cont√≠nuo)",
                    "popup_content": "No meu atendimento, ofere√ßo sess√µes avulsas ou pacotes personalizados (ex.: 3, 5 ou 10 sess√µes) com descontos progressivos e acompanhamento entre sess√µes. A indica√ß√£o da frequ√™ncia e dura√ß√£o do pacote varia conforme a patologia e a resposta do animal. Geralmente, iniciamos com sess√µes mais frequentes e ajustamos os intervalos a partir da evolu√ß√£o, visando sempre a melhoria cont√≠nua da qualidade de vida."
                },
                {
                    "id": 5,
                    "title": "Outros Servi√ßos", 
                    "icon": "fas fa-syringe",
                    "popup_title": "Outros Servi√ßos", 
                    "popup_content": "- Servi√ßo de vacina√ß√£o com conforto e seguran√ßa no domic√≠lio, utilizando protocolos vacinais personalizados conforme a idade, hist√≥rico vacinal e necessidades cl√≠nicas do pet.\n\n- Emiss√£o de atestados de viagem mediante avalia√ß√£o e exames complementares laboratoriais, garantindo que seu animal esteja regularizado e apto para deslocamentos nacionais ou internacionais."
                },
                {
                    "id": 7,
                    "title": "Sobre Mim", 
                    "icon": "fas fa-user-md",
                    "popup_title": "Sobre Mim", 
                    "popup_content": "M√©dica veterin√°ria, mestranda em Ci√™ncia Animal pela UFPB ‚áÜ Instituto Internacional de Neuroci√™ncias, com especializa√ß√£o em Acupuntura Veterin√°ria e Terapias Integrativas. Nos meus atendimentos, utilizo acupuntura, eletroacupuntura, fotobiomodula√ß√£o, eletroestimula√ß√£o e moxabust√£o de forma personalizada para cada paciente.\n\nMeu trabalho tem como foco tratar o animal de maneira integral, buscando equil√≠brio e entendendo as causas dos problemas, e n√£o apenas aliviando sintomas. Sempre que necess√°rio, combino diferentes t√©cnicas conforme as necessidades e a resposta individual de cada pet.\n\nOs atendimentos s√£o realizados no conforto do lar ou em cl√≠nicas parceiras, com dedica√ß√£o e aten√ß√£o ao melhor para cada fam√≠lia. Estou sempre dispon√≠vel para esclarecer d√∫vidas, orientar tutores e contribuir para que os animais tenham uma vida mais saud√°vel e feliz. ü©∑" 
                }
            ],
            // Depoimentos iniciais vazios: Agora tudo ser√° carregado do Firestore.
            "testimonials": [] 
        };

        // --- CONTEXTO FIREBASE ---
        const FirebaseContext = React.createContext({
            db: null, auth: null, userId: null, isAuthReady: false
        });

        const useFirebase = () => React.useContext(FirebaseContext);

        const FirebaseProvider = ({ children }) => {
            const [fb, setFb] = React.useState({ db: null, auth: null, userId: null, isAuthReady: false });

            React.useEffect(() => {
                const initializeFirebase = async () => {
                    if (typeof window.firebase === 'undefined') return;

                    const { initializeApp, getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, getFirestore } = window.firebase;
                    
                    const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
                    const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
                    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    
                    try {
                        // window.firebase.setLogLevel('debug'); // Descomente para ver logs do Firebase
                        const app = initializeApp(firebaseConfig);
                        const auth = getAuth(app);
                        const db = getFirestore(app);

                        if (initialAuthToken) {
                            await signInWithCustomToken(auth, initialAuthToken);
                        } else {
                            await signInAnonymously(auth);
                        }

                        // Listener para garantir que o userId est√° pronto
                        onAuthStateChanged(auth, (user) => {
                            const userId = user?.uid || crypto.randomUUID();
                            setFb({ db, auth, userId, isAuthReady: true });
                        });

                    } catch (error) {
                        console.error("Erro ao inicializar Firebase ou autenticar:", error);
                        setFb(prev => ({ ...prev, isAuthReady: true })); // Continua mesmo com erro
                    }
                };
                initializeFirebase();
            }, []);

            return (
                <FirebaseContext.Provider value={fb}>
                    {children}
                </FirebaseContext.Provider>
            );
        };

        // --- COMPONENTS DA P√ÅGINA ---
        
        // Componente de Login (reintroduzido)
        const AdminLoginModal = ({ onLoginSuccess, onClose }) => {
            const [password, setPassword] = React.useState('');
            const [error, setError] = React.useState('');
            const [loading, setLoading] = React.useState(false);

            const handleLogin = (e) => {
                e.preventDefault();
                setError('');
                setLoading(true);

                // Simula√ß√£o de autentica√ß√£o com senha est√°tica
                setTimeout(() => {
                    if (password === HARDCODED_PASSWORD) {
                        onLoginSuccess();
                        onClose();
                    } else {
                        setError('Senha incorreta.');
                    }
                    setLoading(false);
                }, 500);
            };

            const data = {
                popup_title: "Acesso de Administrador",
                id: 'admin_login'
            };

            return (
                <Modal data={data} onClose={onClose}>
                    <form onSubmit={handleLogin} className="space-y-4 p-2">
                        <p className="text-gray-600 text-sm">
                            Esta √°rea √© restrita para gest√£o do conte√∫do.
                        </p>
                        <input
                            type="password"
                            value={password}
                            onChange={(e) => setPassword(e.target.value)}
                            placeholder="Insira a senha de Admin"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-pastel-accent focus:border-pastel-accent"
                            required
                        />
                        {error && <p className="text-red-500 text-sm font-semibold">{error}</p>}
                        <button
                            type="submit"
                            disabled={loading}
                            className={`w-full py-3 rounded-xl text-white font-bold transition-colors ${loading ? 'bg-gray-400' : 'bg-pastel-accent hover:bg-[#c99a6c]'}`}
                        >
                            {loading ? 'Verificando...' : 'Acessar Painel'}
                        </button>
                    </form>
                </Modal>
            );
        };

        // Fun√ß√£o para formatar o texto do modal
        const FormattedText = ({ text }) => {
            if (!text) return null;
            const paragraphs = text.split('\n\n');
            return (
                <div className="space-y-4 text-base md:text-lg text-gray-700 leading-relaxed"> 
                    {paragraphs.map((paragraph, idx) => {
                        const lines = paragraph.split('\n');
                        return (
                            <p key={idx}>
                                {lines.map((line, lineIdx) => {
                                    const parts = line.split(/(\*\*.*?\*\*)/g);
                                    
                                    if (line.startsWith('- ')) {
                                        const listItemText = line.substring(2).trim();
                                        return (
                                            <span key={lineIdx} className="flex items-start mt-1">
                                                <i className="fas fa-check-circle text-pastel-accent mt-1 mr-2 flex-shrink-0 text-sm"></i>
                                                <span className="flex-grow">
                                                    {listItemText.split(/(\*\*.*?\*\*)/g).map((part, partIdx) => {
                                                        if (part.startsWith('**') && part.endsWith('**')) {
                                                            return <strong key={partIdx} className="font-bold text-pastel-primary">{part.slice(2, -2)}</strong>;
                                                        }
                                                        return part;
                                                    })}
                                                </span>
                                            </span>
                                        );
                                    } else {
                                        return (
                                            <span key={lineIdx}>
                                                {parts.map((part, partIdx) => {
                                                    if (part.startsWith('**') && part.endsWith('**')) {
                                                        return <strong key={partIdx} className="font-bold text-pastel-primary">{part.slice(2, -2)}</strong>;
                                                    }
                                                    return part;
                                                })}
                                                {lineIdx < lines.length - 1 && <br />}
                                            </span>
                                        );
                                    }
                                })}
                            </p>
                        );
                    })}
                </div>
            );
        };

        const ProfileHeader = ({ profileImageUrl }) => {
            const imageSrc = profileImageUrl || siteData.profile.image;
            return (
                <div className="text-center mb-6">
                    <div className="relative inline-block mb-3 p-1 bg-white rounded-full shadow-xl border border-gray-50">
                        <div className="w-32 h-32 rounded-full mx-auto overflow-hidden border-4 border-pastel-primary/50">
                            <img 
                                src={imageSrc} 
                                alt={siteData.profile.name} 
                                onError={(e) => {e.target.src = siteData.profile.image;}}
                                className="w-full h-full object-cover"
                            />
                        </div>
                    </div>
                    <h1 className="text-2xl font-bold font-serif text-gray-800 leading-tight px-4 mt-2">
                        {siteData.profile.name}
                    </h1>
                    <p className="text-sm font-semibold text-pastel-primary mt-1 tracking-wider uppercase">
                        {siteData.profile.title_extra}
                    </p>
                    <p className="text-sm font-bold text-pastel-primary mt-1 tracking-wider uppercase">
                        {siteData.profile.crmv}
                    </p>
                    <p className="text-base font-semibold text-gray-700 mt-1"> 
                        {siteData.profile.tagline_main}
                    </p>
                    <p className="text-sm font-semibold text-gray-700 mt-1"> 
                        {siteData.profile.tagline_sub}
                    </p>
                </div>
            );
        };

        // Componente de Destaque
        const HighlightCard = () => (
            <div className="bg-pastel-secondary p-5 rounded-xl shadow-inner mb-6 border border-pastel-secondary/50">
                <h3 className="font-serif text-lg font-bold text-pastel-primary mb-2">
                    <i className="fas fa-home mr-2 text-pastel-accent"></i>
                    {siteData.highlight_box.title}
                </h3>
                <p className="text-sm text-gray-700 leading-relaxed">
                    {siteData.highlight_box.content}
                </p>
            </div>
        );


        const LinkButton = ({ btn, onClick }) => {
            const isHighlight = btn.type === 'link_highlight';
            
            if (isHighlight) {
                const waLink = `https://wa.me/55${siteData.social.whatsapp}?text=${encodeURIComponent(siteData.whatsapp_message)}`;
                return (
                    <a href={waLink} target="_blank" className="link-btn w-full py-4 px-6 rounded-xl flex items-center justify-between transition-all duration-300 transform hover:-translate-y-1 mb-4 shadow-xl border bg-pastel-primary text-white border-transparent hover:bg-[#7a967d] shadow-md no-underline">
                        <div className="flex items-center gap-4">
                            <i className={`${btn.icon} text-xl w-6 text-center`}></i>
                            <span className="font-extrabold text-base md:text-lg text-left tracking-wide uppercase">{btn.label}</span>
                        </div>
                        <i className="fas fa-hand-pointer text-sm"></i>
                    </a>
                );
            }

            const baseClasses = "link-btn w-full py-4 px-6 rounded-xl flex items-center justify-between transition-all duration-300 transform hover:scale-[1.01] mb-4 shadow-sm border";
            const styleClasses = "bg-white text-gray-600 border-gray-100 hover:border-pastel-secondary hover:shadow-lg";

            return (
                <button onClick={() => onClick(btn)} className={`${baseClasses} ${styleClasses}`}>
                    <div className="flex items-center gap-4">
                        <i className={`${btn.icon} text-lg w-6 text-center text-pastel-primary`}></i>
                        <span className="font-semibold text-base text-left text-gray-700">{btn.title}</span>
                    </div>
                    <i className="fas fa-chevron-right text-xs text-gray-300"></i>
                </button>
            );
        };

        const TestimonialCard = ({ testimonial, isAdmin, onDelete, onEdit, isEditing, EditForm }) => {
            const iconClass = testimonial.animal_type === 'cat' ? 'fas fa-cat' : 'fas fa-dog';
            // Usa o campo 'date' se for string (do formul√°rio), sen√£o usa createdAt
            const dateSource = testimonial.date && typeof testimonial.date === 'string' ? testimonial.date : testimonial.createdAt;
            const date = dateSource ? new Date(dateSource).toLocaleDateString('pt-BR') : 'Data Desconhecida';
            
            return (
                <div className={`p-5 rounded-xl shadow-md border mb-4 ${isEditing ? 'edit-form-card' : 'bg-white border-gray-100'}`}>
                    {isEditing ? (
                        <EditForm testimonial={testimonial} />
                    ) : (
                        <>
                            <p className="text-gray-700 italic text-base mb-3">
                                "{testimonial.quote}"
                            </p>
                            <div className="flex justify-between items-center text-sm text-gray-500 font-semibold pt-2 border-t border-pastel-secondary/50">
                                <span className="flex items-center gap-2">
                                    <i className={`${iconClass} text-pastel-accent`}></i>
                                    {testimonial.author}
                                </span>
                                <span className="text-xs">{date}</span>
                            </div>
                            
                            {/* CONTROLES DE ADMIN */}
                            {isAdmin && (
                                <div className="flex justify-end gap-2 mt-3 pt-3 border-t border-gray-100">
                                    <button 
                                        onClick={() => onEdit(testimonial)}
                                        className="text-sm px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full hover:bg-yellow-200 transition"
                                    >
                                        <i className="fas fa-edit mr-1"></i> Editar
                                    </button>
                                    <button 
                                        onClick={() => onDelete(testimonial.id)}
                                        className="text-sm px-3 py-1 bg-red-100 text-red-800 rounded-full hover:bg-red-200 transition"
                                    >
                                        <i className="fas fa-trash-alt mr-1"></i> Excluir
                                    </button>
                                </div>
                            )}
                        </>
                    )}
                </div>
            );
        };
        
        // Componente de Formul√°rio de Edi√ß√£o
        const EditTestimonialForm = ({ testimonial, onCancel, onSave }) => {
            const [author, setAuthor] = React.useState(testimonial.author);
            const [quote, setQuote] = React.useState(testimonial.quote);
            const [animalType, setAnimalType] = React.useState(testimonial.animal_type || 'dog');
            // Formata a data para input[type="date"]
            const initialDate = testimonial.date || (testimonial.createdAt ? new Date(testimonial.createdAt).toISOString().slice(0, 10) : new Date().toISOString().slice(0, 10));
            const [date, setDate] = React.useState(initialDate);

            const [loading, setLoading] = React.useState(false);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                try {
                    await onSave(testimonial.id, { author, quote, animal_type: animalType, date });
                } catch (e) {
                    console.error("Erro ao salvar edi√ß√£o:", e);
                    // Em um app real, mostrar uma mensagem de erro
                } finally {
                    setLoading(false);
                }
            };

            return (
                <form onSubmit={handleSubmit} className="space-y-3 p-1">
                    <h4 className="font-bold text-pastel-primary">Editando Depoimento</h4>
                    <input
                        type="text"
                        value={author}
                        onChange={(e) => setAuthor(e.target.value)}
                        placeholder="Nome do Tutor"
                        className="w-full p-2 border border-gray-300 rounded-lg text-sm"
                        required
                    />
                     <input
                        type="date"
                        value={date}
                        onChange={(e) => setDate(e.target.value)}
                        className="w-full p-2 border border-gray-300 rounded-lg text-sm"
                        required
                    />
                    <textarea
                        value={quote}
                        onChange={(e) => setQuote(e.target.value)}
                        placeholder="Texto do Depoimento"
                        rows="3"
                        className="w-full p-2 border border-gray-300 rounded-lg text-sm"
                        required
                    ></textarea>
                     <select
                        value={animalType}
                        onChange={(e) => setAnimalType(e.target.value)}
                        className="w-full p-2 border border-gray-300 rounded-lg text-sm"
                    >
                        <option value="dog">Cachorro</option>
                        <option value="cat">Gato</option>
                        <option value="other">Outro</option>
                    </select>
                    <div className="flex justify-end gap-2">
                        <button type="button" onClick={onCancel} className="px-3 py-1 text-sm bg-gray-200 rounded-full hover:bg-gray-300">
                            Cancelar
                        </button>
                        <button type="submit" disabled={loading} className="px-3 py-1 text-sm bg-pastel-accent text-white rounded-full hover:bg-[#c99a6c] disabled:opacity-50">
                            {loading ? 'Salvando...' : 'Salvar'}
                        </button>
                    </div>
                </form>
            );
        };
        
        const TestimonialsSection = ({ testimonials, isAdmin, onDelete, onEdit, editingId, onEditSave, onEditCancel }) => {
            // Regra 2: S√≥ renderiza se houver depoimentos
            if (testimonials.length === 0) {
                return null;
            }
            
            // Fun√ß√£o wrapper para passar handleEditSave corretamente
            const EditFormWrapper = (props) => (
                <EditTestimonialForm {...props} onCancel={onEditCancel} onSave={onEditSave} />
            );

            return (
                <div className="mt-8 pt-4 border-t border-pastel-secondary">
                    <h3 className="font-serif text-xl font-bold text-gray-800 mb-4 text-center">
                        O que dizem sobre o Atendimento
                    </h3>
                    <div className="space-y-4">
                        {testimonials.map((t) => (
                            <TestimonialCard 
                                key={t.id} 
                                testimonial={t} 
                                isAdmin={isAdmin}
                                onDelete={onDelete}
                                onEdit={onEdit}
                                isEditing={editingId === t.id}
                                EditForm={EditFormWrapper}
                            />
                        ))}
                    </div>
                </div>
            );
        };
        
        // --- NOVO COMPONENTE: Atualizar Foto de Perfil (Corrigido e Aprimorado) ---
        const ProfileImageUpdater = ({ onUpdate, currentImageUrl }) => {
            // Usa a URL atual do perfil como valor inicial do input
            const [inputUrl, setInputUrl] = React.useState(currentImageUrl || siteData.profile.image);
            const [loading, setLoading] = React.useState(false);
            const [message, setMessage] = React.useState({ text: '', type: '' });
            
            // Atualiza inputUrl se currentImageUrl mudar (e o componente n√£o estiver interagindo)
            React.useEffect(() => {
                // Atualiza o input sempre que a imagem salva mudar no Firestore (garante sincronia)
                setInputUrl(currentImageUrl || siteData.profile.image);
            }, [currentImageUrl]);

            const handleSubmit = async (e) => {
                e.preventDefault();
                setLoading(true);
                setMessage({ text: '', type: '' });

                const urlToSave = inputUrl.trim();
                
                if (!urlToSave) {
                    setMessage({ text: 'O campo de URL n√£o pode estar vazio.', type: 'error' });
                    setLoading(false);
                    return;
                }

                const result = await onUpdate(urlToSave);
                
                if (result.success) {
                    setMessage({ text: result.message, type: 'success' });
                    // A atualiza√ß√£o do estado da imagem principal acontecer√° via onSnapshot
                } else {
                    setMessage({ text: result.message, type: 'error' });
                }
                setLoading(false);
            };

            const imageUrlToPreview = inputUrl.trim() || "https://placehold.co/100x100/CCCCCC/333333?text=Preview";

            return (
                <div className="bg-white p-5 rounded-xl shadow-md border border-gray-100 mb-6 edit-form-card">
                    <h4 className="font-semibold text-lg text-pastel-accent mb-3">Atualizar Foto de Perfil</h4>
                    <p className="text-xs text-gray-700 mb-4 bg-yellow-50 p-3 rounded-lg border border-yellow-200">
                        ‚ö†Ô∏è **Aten√ß√£o:** Para usar uma imagem do seu computador, voc√™ deve **primeiro fazer o upload para o Canvas** e colar o caminho exato (ex: `uploaded:image_...`) aqui. URLs externas tamb√©m s√£o aceitas.
                    </p>
                    <form onSubmit={handleSubmit} className="space-y-4">
                        
                        <div className="flex gap-4 items-end">
                            <div className="w-16 h-16 rounded-full overflow-hidden flex-shrink-0 border-2 border-pastel-primary/50">
                                <img 
                                    src={imageUrlToPreview} 
                                    alt="Preview"
                                    onError={(e) => {e.target.src = "https://placehold.co/100x100/CCCCCC/333333?text=Erro";}}
                                    className="w-full h-full object-cover"
                                />
                            </div>
                            <div className="flex-grow">
                                <label className="block text-sm font-medium text-gray-700 mb-1">Caminho / URL da Imagem</label>
                                <input
                                    type="text"
                                    value={inputUrl}
                                    onChange={(e) => setInputUrl(e.target.value)}
                                    placeholder="URL ou caminho uploaded:image_..."
                                    className="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-pastel-primary focus:border-pastel-primary"
                                    required
                                />
                            </div>
                        </div>

                        <button 
                            type="submit" 
                            disabled={loading}
                            className={`w-full py-2 rounded-xl text-white font-semibold transition-colors ${loading ? 'bg-gray-400' : 'bg-pastel-primary hover:bg-[#7a967d]'}`}
                        >
                            {loading ? 'Salvando...' : 'Salvar Nova Imagem'}
                        </button>
                    </form>
                    {message.text && (
                        <p className={`mt-3 p-3 rounded-lg font-bold text-sm ${message.type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                            {message.text}
                        </p>
                    )}
                </div>
            );
        };
        
        // Componente de Cadastro de Novo Depoimento
        const TestimonialForm = ({ db, appId }) => {
            const [formData, setFormData] = React.useState({ author: '', quote: '', animal_type: 'dog', date: new Date().toISOString().slice(0, 10) });
            const [message, setMessage] = React.useState({ text: '', type: '' });
            const [loading, setLoading] = React.useState(false);

            const handleChange = (e) => {
                setFormData({ ...formData, [e.target.name]: e.target.value });
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!formData.author || !formData.quote) {
                    setMessage({ text: 'Preencha Tutor e Texto do Depoimento.', type: 'error' });
                    return;
                }
                
                setLoading(true);
                const collectionRef = window.firebase.collection(db, `artifacts/${appId}/public/data/testimonials`);

                try {
                    await window.firebase.addDoc(collectionRef, {
                        ...formData,
                        createdAt: window.firebase.serverTimestamp() // Melhor usar serverTimestamp para ordena√ß√£o
                    });
                    setMessage({ text: 'Depoimento cadastrado com sucesso!', type: 'success' });
                    setFormData({ author: '', quote: '', animal_type: 'dog', date: new Date().toISOString().slice(0, 10) });
                } catch (e) {
                    console.error("Erro ao adicionar depoimento:", e);
                    setMessage({ text: 'Erro ao adicionar depoimento.', type: 'error' });
                } finally {
                    setLoading(false);
                }
            };

            return (
                <div className="bg-white p-5 rounded-xl shadow-md border border-gray-100 edit-form-card">
                    <h4 className="font-semibold text-lg text-pastel-accent mb-3">Cadastrar Novo Depoimento</h4>
                    <form onSubmit={handleSubmit} className="space-y-4">
                        <input
                            type="text"
                            name="author"
                            value={formData.author}
                            onChange={handleChange}
                            placeholder="Nome do Tutor (ex: Ana C.)"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-pastel-primary focus:border-pastel-primary"
                            required
                        />
                         <input
                            type="date"
                            name="date"
                            value={formData.date}
                            onChange={handleChange}
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-pastel-primary focus:border-pastel-primary"
                            required
                        />
                        <textarea
                            name="quote"
                            value={formData.quote}
                            onChange={handleChange}
                            placeholder="Texto do Depoimento"
                            rows="3"
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-pastel-primary focus:border-pastel-primary"
                            required
                        ></textarea>
                        <select
                            name="animal_type"
                            value={formData.animal_type}
                            onChange={handleChange}
                            className="w-full p-3 border border-gray-300 rounded-lg focus:ring-pastel-primary focus:border-pastel-primary"
                        >
                            <option value="dog">Cachorro</option>
                            <option value="cat">Gato</option>
                            <option value="other">Outro</option>
                        </select>
                        <button 
                            type="submit" 
                            disabled={loading}
                            className={`w-full py-2 rounded-xl text-white font-semibold transition-colors ${loading ? 'bg-gray-400' : 'bg-pastel-primary hover:bg-[#7a967d]'}`}
                        >
                            {loading ? 'Enviando...' : 'Salvar Depoimento'}
                        </button>
                    </form>
                    {message.text && (
                        <p className={`mt-3 p-3 rounded-lg font-bold text-sm ${message.type === 'success' ? 'bg-green-100 text-green-700' : 'bg-red-100 text-red-700'}`}>
                            {message.text}
                        </p>
                    )}
                </div>
            );
        };

        const AdminDashboard = ({ onLogout, updateProfileImage, currentImageUrl }) => {
            const { db, isAuthReady } = useFirebase();
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

            if (!isAuthReady || !db) return null;

            return (
                <div className="mt-8 pt-6 border-t-4 border-pastel-primary/50 bg-pastel-secondary/20 p-6 rounded-2xl shadow-inner">
                    <h3 className="font-serif text-2xl font-bold text-pastel-primary mb-4 text-center">
                        Painel de Administra√ß√£o
                    </h3>
                    
                    {/* Componente para Atualizar a Foto de Perfil */}
                    <ProfileImageUpdater 
                        onUpdate={updateProfileImage} 
                        currentImageUrl={currentImageUrl}
                    />
                    
                    {/* Componente para Cadastrar Depoimentos */}
                    <TestimonialForm db={db} appId={appId} />
                    
                    <button 
                        onClick={onLogout}
                        className="w-full mt-6 py-3 bg-gray-500 text-white font-bold rounded-xl hover:bg-gray-600 transition-colors text-sm"
                    >
                        Logout
                    </button>
                </div>
            );
        };

        const Modal = ({ data, onClose, children }) => {
            React.useEffect(() => {
                const handleEsc = (e) => { if (e.key === 'Escape') onClose(); };
                window.addEventListener('keydown', handleEsc);
                document.body.style.overflow = 'hidden';
                return () => {
                    document.body.style.overflow = 'auto'; 
                    window.removeEventListener('keydown', handleEsc);
                };
            }, [onClose]);

            if (!data) return null;

            const showContactButton = data.id !== 'galeria' && data.popup_title !== "Acesso de Administrador";

            return (
                <div 
                    className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-gray-800 bg-opacity-40 backdrop-blur-sm modal-overlay"
                    onClick={onClose}
                >
                    <div 
                        className="bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-hidden shadow-2xl modal-content"
                        onClick={(e) => e.stopPropagation()}
                    >
                        <div className="p-6 custom-scroll overflow-y-auto max-h-[90vh]">
                            <div className="flex justify-between items-start mb-4 border-b pb-3">
                                <h2 className="font-serif text-xl font-bold text-pastel-primary">
                                    {data.popup_title}
                                </h2>
                                <button 
                                    onClick={onClose}
                                    className="p-2 -mt-2 -mr-2 text-gray-400 hover:text-gray-600 transition-colors"
                                    aria-label="Fechar"
                                >
                                    <i className="fas fa-times text-lg"></i>
                                </button>
                            </div>

                            {/* Renderiza o conte√∫do padr√£o ou o children (para login) */}
                            {children ? children : <FormattedText text={data.popup_content} />}
                        </div>
                        
                        {/* Bot√£o de Contato (se aplic√°vel) */}
                        {showContactButton && (
                            <div className="p-4 border-t bg-gray-50 text-center">
                                <a 
                                    href={`https://wa.me/55${siteData.social.whatsapp}?text=${encodeURIComponent(siteData.whatsapp_message)}`} 
                                    target="_blank" 
                                    className="link-btn w-full py-3 px-6 rounded-xl flex items-center justify-center gap-2 transition-all duration-300 bg-pastel-accent text-white font-bold hover:bg-[#c99a6c]"
                                    onClick={onClose} 
                                >
                                    <i className="fab fa-whatsapp text-lg"></i>
                                    Agendar uma Consulta (WhatsApp)
                                </a>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        // Componente Rodap√© Social ATUALIZADO com bot√£o de Admin
        const SocialFooter = ({ isLoggedIn, onLoginClick, onLogout }) => (
            <div className="mt-10 flex justify-center gap-6 pb-6"> 
                {/* WhatsApp */}
                <a href={`https://wa.me/55${siteData.social.whatsapp}?text=${encodeURIComponent(siteData.whatsapp_message)}`} target="_blank" className="w-12 h-12 rounded-full bg-pastel-primary/10 shadow-md flex items-center justify-center text-green-500 hover:text-green-700 hover:scale-110 transition-all text-2xl border border-gray-100">
                    <i className="fab fa-whatsapp"></i>
                </a>
                {/* Instagram */}
                <a href={siteData.social.instagram} target="_blank" className="w-12 h-12 rounded-full bg-pastel-primary/10 shadow-md flex items-center justify-center text-pink-500 hover:text-pink-700 hover:scale-110 transition-all text-2xl border border-gray-100">
                    <i className="fab fa-instagram"></i>
                </a>
                {/* Email */}
                <a href={`mailto:${siteData.social.email}`} className="w-12 h-12 rounded-full bg-pastel-primary/10 shadow-md flex items-center justify-center text-blue-500 hover:text-blue-700 hover:scale-110 transition-all text-2xl border border-gray-100">
                    <i className="far fa-envelope"></i>
                </a>
                
                {/* Bot√£o de Admin Super Discreto (Cadeado/Logout) */}
                {isLoggedIn ? (
                    <button 
                        onClick={onLogout}
                        title="Logout Admin"
                        className="w-12 h-12 rounded-full bg-pastel-secondary/20 shadow-md flex items-center justify-center text-pastel-primary hover:text-red-500 hover:scale-110 transition-all text-2xl border border-gray-100 admin-footer-btn"
                    >
                         <i className="fas fa-sign-out-alt text-lg"></i>
                    </button>
                ) : (
                    <button 
                        onClick={onLoginClick}
                        title="Admin Login"
                        className="w-12 h-12 rounded-full bg-pastel-secondary/20 shadow-md flex items-center justify-center text-pastel-primary hover:text-pastel-accent hover:scale-110 transition-all text-2xl border border-gray-100 admin-footer-btn"
                    >
                        <i className="fas fa-lock text-lg"></i>
                    </button>
                )}
            </div>
        );


        // --- MAIN APP COMPONENT ---

        const App = () => {
            const { db, isAuthReady, userId } = useFirebase();
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';

            const [selectedModal, setSelectedModal] = React.useState(null);
            const [showLogin, setShowLogin] = React.useState(false);
            const [isLoggedIn, setIsLoggedIn] = React.useState(false);
            const [profileImageUrl, setProfileImageUrl] = React.useState(null);
            const [testimonials, setTestimonials] = React.useState([]);
            
            // Estado para Edi√ß√£o
            const [editingId, setEditingId] = React.useState(null);


            // 1. CARREGAR IMAGEM DE PERFIL DO FIRESTORE
            React.useEffect(() => {
                if (!isAuthReady || !db) return;

                const configRef = window.firebase.doc(db, `artifacts/${appId}/public/data/config/profile_image`);

                const unsubscribe = window.firebase.onSnapshot(configRef, (docSnap) => {
                    if (docSnap.exists() && docSnap.data().imageUrl) {
                        setProfileImageUrl(docSnap.data().imageUrl);
                    } else {
                        // Se n√£o existir, usa a imagem de fallback
                        setProfileImageUrl(siteData.profile.image); 
                    }
                }, (error) => {
                    console.error("Erro ao ler URL da imagem:", error);
                    // Em caso de erro, usa a imagem de fallback
                    setProfileImageUrl(siteData.profile.image);
                });

                return () => unsubscribe();
            }, [db, isAuthReady]);

            // 2. CARREGAR DEPOIMENTOS DO FIRESTORE 
            React.useEffect(() => {
                if (!isAuthReady || !db) return;

                const collectionPath = `artifacts/${appId}/public/data/testimonials`;
                const q = window.firebase.query(window.firebase.collection(db, collectionPath));
                
                const unsubscribe = window.firebase.onSnapshot(q, (snapshot) => {
                    const newTestimonials = snapshot.docs.map(doc => {
                        const data = doc.data();
                        
                        // Garante que createdAt √© um ISO string para facilitar a manipula√ß√£o
                        const createdAtString = data.createdAt ? 
                                (data.createdAt.toDate ? data.createdAt.toDate().toISOString() : data.createdAt) 
                                : new Date().toISOString(); 

                        return {
                            id: doc.id, 
                            ...data,
                            createdAt: createdAtString
                        };
                    });
                    
                    // Ordena por data de cria√ß√£o (mais recente primeiro)
                    newTestimonials.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                    
                    setTestimonials(newTestimonials);
                }, (error) => {
                    console.error("Erro ao ler depoimentos:", error);
                });

                return () => unsubscribe();
            }, [db, isAuthReady]);
            
            // --- Fun√ß√µes de Admin CRUD ---

            const updateProfileImage = async (newImageUrl) => {
                if (!db || !isLoggedIn) {
                    return { success: false, message: "N√£o autenticado para atualizar." };
                }
                const docRef = window.firebase.doc(db, `artifacts/${appId}/public/data/config/profile_image`);
                try {
                    // Usa setDoc para criar ou sobrescrever o documento de configura√ß√£o
                    await window.firebase.setDoc(docRef, { imageUrl: newImageUrl });
                    return { success: true, message: "Imagem de perfil atualizada com sucesso!" };
                } catch (error) {
                    console.error("Erro ao atualizar imagem de perfil:", error);
                    return { success: false, message: `Erro ao salvar: ${error.message}` };
                }
            };

            const handleDelete = async (id) => {
                if (!isLoggedIn || !db) return;
                
                // Em um ambiente real, substitua por um modal customizado
                if (!window.confirm("Tem certeza que deseja EXCLUIR este depoimento?")) return;

                try {
                    const docRef = window.firebase.doc(db, `artifacts/${appId}/public/data/testimonials/${id}`);
                    await window.firebase.deleteDoc(docRef);
                    // onSnapshot cuidar√° da atualiza√ß√£o do state
                } catch (error) {
                    console.error("Erro ao excluir depoimento:", error);
                }
            };
            
            const handleStartEdit = (testimonial) => {
                setEditingId(testimonial.id);
            };
            
            const handleEditCancel = () => {
                setEditingId(null);
            };

            const handleEditSave = async (id, updatedData) => {
                if (!isLoggedIn || !db) return;
                
                try {
                    const docRef = window.firebase.doc(db, `artifacts/${appId}/public/data/testimonials/${id}`);
                    await window.firebase.updateDoc(docRef, { 
                        ...updatedData,
                        updatedAt: window.firebase.serverTimestamp()
                    });
                    setEditingId(null); // Sai do modo de edi√ß√£o
                } catch (error) {
                    console.error("Erro ao salvar edi√ß√£o:", error);
                    throw error;
                }
            };
            
            // --- Fun√ß√µes da UI ---

            const openModal = (btnData) => {
                setSelectedModal(btnData);
            };

            const closeModal = () => {
                setSelectedModal(null);
                setShowLogin(false);
            };
            
            const handleLoginAttempt = () => {
                setShowLogin(true);
            };
            
            const handleLoginSuccess = () => {
                setIsLoggedIn(true);
                setShowLogin(false); // Fecha o modal de login
            };

            const handleLogout = () => {
                setIsLoggedIn(false);
            };


            // Filtragem e ordena√ß√£o dos bot√µes
            const filteredButtons = siteData.buttons.filter(btn => btn.id !== 6);
            const sortedButtons = filteredButtons.sort((a, b) => {
                if (a.type === 'link_highlight') return -1; 
                if (b.type === 'link_highlight') return 1;

                if (a.id === 1 && b.id === 2) return -1;
                if (a.id === 2 && b.id === 1) return 1;

                if (typeof a.id === 'number' && typeof b.id === 'number') {
                    return a.id - b.id;
                }
                
                return 0;
            });


            return (
                <div className="p-4"> 
                    <div className="w-full max-w-lg mx-auto">
                        
                        {/* 1. Header (Foto, Nome, CRMV, Taglines) */}
                        <ProfileHeader profileImageUrl={profileImageUrl} />

                        {/* 2. Caixa de Destaque */}
                        <HighlightCard />

                        {/* 3. Bot√µes de A√ß√£o */}
                        <div className="space-y-3 mb-6">
                            {sortedButtons.map(btn => (
                                <LinkButton 
                                    key={btn.id} 
                                    btn={btn} 
                                    onClick={openModal} 
                                />
                            ))}
                        </div>
                        
                        {/* 4. Painel de Administra√ß√£o (Vis√≠vel apenas ap√≥s o login) */}
                        {isLoggedIn && (
                            <AdminDashboard 
                                onLogout={handleLogout} 
                                updateProfileImage={updateProfileImage}
                                currentImageUrl={profileImageUrl}
                            />
                        )}

                        {/* 5. Se√ß√£o de Depoimentos (Condicional: s√≥ aparece se houver depoimentos) */}
                        <TestimonialsSection 
                            testimonials={testimonials} 
                            isAdmin={isLoggedIn}
                            onDelete={handleDelete}
                            onEdit={handleStartEdit}
                            onEditCancel={handleEditCancel}
                            onEditSave={handleEditSave}
                            editingId={editingId}
                        />

                        {/* 6. Footer Social ATUALIZADO */}
                        <SocialFooter 
                            isLoggedIn={isLoggedIn} 
                            onLoginClick={handleLoginAttempt}
                            onLogout={handleLogout}
                        />
                    </div>

                    {/* Modais */}
                    {selectedModal && <Modal data={selectedModal} onClose={closeModal} />}
                    {showLogin && <AdminLoginModal onLoginSuccess={handleLoginSuccess} onClose={closeModal} />} 
                </div>
            );
        };

        // Envolve o App principal com o Provider do Firebase
        ReactDOM.render(<FirebaseProvider><App /></FirebaseProvider>, document.getElementById('root'));
    </script>
</body>
</html>